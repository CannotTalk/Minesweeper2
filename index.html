        // --- Debug Functions ---
        function revealNonMines() {
            if (gameOver) return;
             if (!gameStarted) { // Start timer if debug is first action
                 gameStarted = true;
                 timerInterval = setInterval(updateTimer, 1000);
             }

            // Reveal all non-mine squares
            for (let i = 0; i < gridSize; i++) {
                for (let j = 0; j < gridSize; j++) {
                    if (!board[i][j].isMine && !board[i][j].isRevealed) {
                         revealSquare(i,j); // This will increment revealedNonMineCount
                    }
                }
            }

             // After revealing, check if the win condition is met
             checkWinCondition(); // This should now trigger endGame(true)

             // --- ここでメッセージを上書き ---
             // Since revealNonMines forces a win state (if not already game over),
             // explicitly set the desired message after the win state is processed.
             // We check gameOver again to ensure endGame(true) was called by checkWinCondition.
             if (gameOver) {
                 messageBox.textContent = 'All squares revealed!';
             }

             // Fallback: If somehow checkWinCondition didn't trigger endGame (highly unlikely)
             // Force the end game state and set the message.
             if (!gameOver) {
                 endGame(true); // Force win state
                 messageBox.textContent = 'All squares revealed!'; // Set the message
             }
        }

        function revealAll() {
             if (gameOver) return;
             if (!gameStarted) { // Start timer if debug is first action
                 gameStarted = true;
                 timerInterval = setInterval(updateTimer, 1000);
             }
             revealAllMines(true); // Show all mines and content
             endGame(false); // Consider reveal all as a loss or neutral state for scoring
             messageBox.textContent = 'All squares revealed!'; // Specific message for revealAll
        }
